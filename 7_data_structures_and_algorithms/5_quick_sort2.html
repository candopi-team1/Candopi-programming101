<!DOCTYPE html>
<html lang="en-US">
<head >
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">

   <meta name="description" content="Good ions can't surprise you." />
   <meta name="keywords" content="job, empowermentHMK" /> 
   <meta name="viewport" content="width=device-width, initial-scale=1.0">

   <title>  Quick Sort 2  </title> 
</head>

 <body>
<h2>Quick Sort 2</h2>

<form name="form1">
  Value1:        <input type="text" name="val1"><br>
  Value2:        <input type="text" name="val2"><br>
  Value3:        <input type="text" name="val3"><br>
  Value4:        <input type="text" name="val4"><br>
  Value5:        <input type="text" name="val5"><br><br>


  <input type="button" name="calc" value="Quick Sort" onclick="sort(form1)">


<br><br>

Sorted Numbers:<input type="text" name="sortedNumbers">

</form>

<br>
<h2>Analyzing Results</h2>
<div id="solution1"></div>
      
<script type="text/javascript">
gcount=0;

function sort(formObj){
  var val1 = parseFloat(formObj.val1.value);
  var val2 = parseFloat(formObj.val2.value);  
  var val3 = parseFloat(formObj.val3.value);
  var val4 = parseFloat(formObj.val4.value);
  var val5 = parseFloat(formObj.val5.value);

  var array1=[val1, val2,val3,val4, val5];
  // array1=[3,1, 4,1,   5,9,2,6,  5,4];

  document.getElementById("solution1").innerHTML ='';
  

  // OK var array_ret=bubbleSort([2,6, 11, 2, 3, 14, 5]);
  var array_ret=quickSort(array1);
  // OK alert(array_ret);
  formObj.sortedNumbers.value = array_ret;
  
  return;
}


function quickSort(items) {
    return quickSortHelper(items, 0, items.length - 1);
}

function quickSortHelper(items, left, right) {
    document.getElementById("solution1").innerHTML +=  '<p>Helping ' + (gcount+1) +' times</p>';
    gcount++;

    document.getElementById("solution1").innerHTML +=  '<p>  '+ items+ ',L=' + left+ ', R= ' + right +'  </p>';

    var index;
    if (items.length > 1) {
        index = partition(items, left, right);

        if (left < index - 1) {
            document.getElementById("solution1").innerHTML +=  '<p>LHS=  '+  items.slice(left, (index-1)) + '  </p>';

            quickSortHelper(items, left, index - 1);
        }

        if (index < right) {
            document.getElementById("solution1").innerHTML +=  '<p>RHS=  '+  items.slice(index, right) + '  </p>';
            quickSortHelper(items, index, right);
        }
    }
    return items;
}

function partition(array, left, right) {
    var pivot = array[Math.floor((right + left) / 2)];
    document.getElementById("solution1").innerHTML +=  '<p>Partitioning ' + (gcount+1) +' times</p>';
    gcount++;

    while (left <= right) {
        while (pivot > array[left]) {
            document.getElementById("solution1").innerHTML +=  "PV >L<br>"
            left++;
        }
        while (pivot < array[right]) {
            document.getElementById("solution1").innerHTML +=  "PV < R<br>"
            right--;
        }
        if (left <= right) {
            var temp = array[left];
            array[left] = array[right];
            array[right] = temp;
            document.getElementById("solution1").innerHTML +=  "Swapped" + left +" and "+ right+" <br>"
            left++;
            right--;
        }
        document.getElementById("solution1").innerHTML +=  '<p>....... pivot= '+ pivot +', items='+ array +'  </p>';
    }
    
    document.getElementById("solution1").innerHTML +=  '<p> pivot= '+ pivot +', items='+ array +'. Returning ' + left+' </p>';

    return left;
}

// quickSort([6, 1, 23, 4, 2, 3]); // [1, 2, 3, 4, 6, 23]



</script>


 </body>
</html>
